{% extends request.session.admin_logged_in|yesno:'sims_app/base_admin.html,sims_app/base_sensitive.html' %}

{% block title %}
  <title>Research Paper List</title>
{% endblock title %}

{% block content %}
  <div class="row">
    <div class="col-md-12">
      <h2 class="h2 pb-2 mb-4 border-bottom border-dark">Paper List</h2>

      <div class="mb-4 mt-4">
        <a class="container rounded link-underline link-underline-opacity-0 p-2 bg-success text-white" href="{% url 'sims_app:add_paper' %}">Add new paper</a>
      </div>

      <ul class="list-group scrollable-list">
        {% for paper in result_list %}
          <li class="list-group-item mb-4 border">
            <div class="row">

              {% if request.session.admin_logged_in %}
                <div class="col-md-1 border-end">
                  {{ paper.0 }}
                </div>
              {% endif %}

              <div class="col-md-6 border-end">
                {{ paper.1 }}
              </div>

              <div class="col-md-2 border-end">
                {{ paper.2 }}
              </div>

              <div class="col-md-3">
                {{ paper.3 }}
              </div>

              <div class="col-md-12 mt-2 mb-1 border-top">
                <form method="post" action="{% url 'sims_app:delete_paper' %}" style="display: inline;">
                  {% csrf_token %}

                  <input type="hidden" name="paper_ID" value="{{ paper.0 }}">
                  <button type="submit" class="btn btn-danger btn-sm mt-2" onclick="return confirm('Are you sure you want to delete this paper?')">Delete</button>
                </form>
              </div>

            </div>
          </li>
        {% endfor %}
      </ul>

    </div>
  </div>
{% endblock content %}
